# 记录terminal

## 利用bcftools进行变异检测

```bash
bcftools mpileup -Ou -f ../genome/Cucumber_genome_CLv4.fa ../mapping_dir/01.bwa2sortbam/D1.sort.bam |bcftools call -mv -Oz -o Csa_reseq.vcf.gz &> bcftolls.log
bcftools mpi
```
## 利用bcftools从新构建基因组

```bash
bcftools consensus -f ../genome/Cucumber_genome_CLv4.fa Csa_reseq.vcf.gz > Csa_reseq.fa
```

## 利用seqkit将转录组数据转为fasta格式并将双端数据合并

```bash
seqkit fq2fa  ../../raw_data/rna-seq/CsaCfi/JZ24116658-GPR240712-10MGI-CsaCfi_combined_R1.fastq.gz ../../raw_data/rna-seq/CsaCfi/JZ24116658-GPR240712-10MGI-CsaCfi_combined_R2.fastq.gz -o CsaCfi.fa

seqkit fq2fa ../../raw_data/rna-seq/CsaCsa/JZ24116658-GPR240712-10MGI-CsaCsa_combined_R1.fastq.gz CsaCfi.fa.gz ../../raw_data/rna-seq/CsaCsa/JZ24116658-GPR240712-10MGI-CsaCsa_combined_R2.fastq.gz -o CsaCsa.fa 

```

## 利用blast工具简历比对数据库

```bash
makeblastdb -in ../../01-merged-fa/CsaCsa.fa.gz -dbtype nucl -out CsaCsa_rnaseq
makeblastdb -in ../../01-merged-fa/CsaCfi.fa.gz -dbtype nucl -out CsaCfi_rnaseq
```




## 利用seqkit筛选大于100bp的序列

```bash
seqkit seq -g -m 100 CsaCsa.fa.gz > CsaCsa_100bp.fa.gz
seqkit seq -g -m 100 CsaCfi.fa.gz > Csafi_100bp.fa.gz
```